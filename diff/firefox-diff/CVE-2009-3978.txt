diff --git a/modules/libpr0n/decoders/gif/nsGIFDecoder2.cpp b/modules/libpr0n/decoders/gif/nsGIFDecoder2.cpp
--- a/modules/libpr0n/decoders/gif/nsGIFDecoder2.cpp
+++ b/modules/libpr0n/decoders/gif/nsGIFDecoder2.cpp
@@ -1072,7 +1072,7 @@ nsresult nsGIFDecoder2::GifWrite(const P
       // Mask to limit the color values within the colormap
       mColorMask = 0xFF >> (8 - realDepth);
       BeginImageFrame(realDepth);
-      if (!mImageData) {
+      if (!mImageData || !mImageFrame) {
         mGIFStruct.state = gif_error;
         break;
       }
