diff --git a/content/events/src/nsDOMPopupBlockedEvent.cpp b/content/events/src/nsDOMPopupBlockedEvent.cpp
index 8f2e89a..1a986ca 100644
--- a/content/events/src/nsDOMPopupBlockedEvent.cpp
+++ b/content/events/src/nsDOMPopupBlockedEvent.cpp
@@ -62,7 +62,6 @@ nsDOMPopupBlockedEvent::~nsDOMPopupBlock
   if (mEventIsInternal) {
     if (mEvent->eventStructType == NS_POPUPBLOCKED_EVENT) {
       nsPopupBlockedEvent* event = NS_STATIC_CAST(nsPopupBlockedEvent*, mEvent);
-      NS_IF_RELEASE(event->mRequestingWindowURI);
       NS_IF_RELEASE(event->mPopupWindowURI);
     }
   }
@@ -79,7 +78,7 @@ NS_INTERFACE_MAP_END_INHERITING(nsDOMEve
 NS_IMETHODIMP
 nsDOMPopupBlockedEvent::InitPopupBlockedEvent(const nsAString & aTypeArg,
                             PRBool aCanBubbleArg, PRBool aCancelableArg,
-                            nsIURI *aRequestingWindowURI,
+                            nsIDOMWindow *aRequestingWindow,
                             nsIURI *aPopupWindowURI,
                             const nsAString & aPopupWindowName,
                             const nsAString & aPopupWindowFeatures)
@@ -92,9 +91,8 @@ nsDOMPopupBlockedEvent::InitPopupBlocked
     case NS_POPUPBLOCKED_EVENT:
     {
        nsPopupBlockedEvent* event = NS_STATIC_CAST(nsPopupBlockedEvent*, mEvent);
-       event->mRequestingWindowURI = aRequestingWindowURI;
+       event->mRequestingWindow = do_GetWeakReference(aRequestingWindow);
        event->mPopupWindowURI = aPopupWindowURI;
-       NS_IF_ADDREF(event->mRequestingWindowURI);
        NS_IF_ADDREF(event->mPopupWindowURI);
        event->mPopupWindowFeatures = aPopupWindowFeatures;
        event->mPopupWindowName = aPopupWindowName;
@@ -108,16 +106,15 @@ nsDOMPopupBlockedEvent::InitPopupBlocked
 }
 
 NS_IMETHODIMP
-nsDOMPopupBlockedEvent::GetRequestingWindowURI(nsIURI **aRequestingWindowURI)
+nsDOMPopupBlockedEvent::GetRequestingWindow(nsIDOMWindow **aRequestingWindow)
 {
-  NS_ENSURE_ARG_POINTER(aRequestingWindowURI);
   if (mEvent->eventStructType == NS_POPUPBLOCKED_EVENT) {
     nsPopupBlockedEvent* event = NS_STATIC_CAST(nsPopupBlockedEvent*, mEvent);
-    *aRequestingWindowURI = event->mRequestingWindowURI;
-    NS_IF_ADDREF(*aRequestingWindowURI);
-    return NS_OK;
+    CallQueryReferent(event->mRequestingWindow.get(), aRequestingWindow);
+  } else {
+    *aRequestingWindow = 0;
   }
-  *aRequestingWindowURI = 0;
+
   return NS_OK;  // Don't throw an exception
 }
 
diff --git a/dom/src/base/nsGlobalWindow.cpp b/dom/src/base/nsGlobalWindow.cpp
index eb62da0..bfd0ea8 100644
--- a/dom/src/base/nsGlobalWindow.cpp
+++ b/dom/src/base/nsGlobalWindow.cpp
@@ -4135,19 +4135,23 @@ PRBool IsPopupBlocked(nsIDOMDocument* aD
 
 static
 void FirePopupBlockedEvent(nsIDOMDocument* aDoc,
-                           nsIURI *aRequestingURI, nsIURI *aPopupURI,
+                           nsIDOMWindow *aRequestingWindow, nsIURI *aPopupURI,
                            const nsAString &aPopupWindowName,
                            const nsAString &aPopupWindowFeatures)
 {
   if (aDoc) {
-    // Fire a "DOMPopupBlocked" event so that the UI can hear about blocked popups.
+    // Fire a "DOMPopupBlocked" event so that the UI can hear about
+    // blocked popups.
     nsCOMPtr<nsIDOMDocumentEvent> docEvent(do_QueryInterface(aDoc));
     nsCOMPtr<nsIDOMEvent> event;
-    docEvent->CreateEvent(NS_LITERAL_STRING("PopupBlockedEvents"), getter_AddRefs(event));
+    docEvent->CreateEvent(NS_LITERAL_STRING("PopupBlockedEvents"),
+                          getter_AddRefs(event));
     if (event) {
       nsCOMPtr<nsIDOMPopupBlockedEvent> pbev(do_QueryInterface(event));
       pbev->InitPopupBlockedEvent(NS_LITERAL_STRING("DOMPopupBlocked"),
-              PR_TRUE, PR_TRUE, aRequestingURI, aPopupURI, aPopupWindowName, aPopupWindowFeatures);
+                                  PR_TRUE, PR_TRUE, aRequestingWindow,
+                                  aPopupURI, aPopupWindowName,
+                                  aPopupWindowFeatures);
       nsCOMPtr<nsIPrivateDOMEvent> privateEvent(do_QueryInterface(event));
       privateEvent->SetTrusted(PR_TRUE);
 
@@ -4273,12 +4277,7 @@ nsGlobalWindow::FireAbuseEvents(PRBool a
   nsCOMPtr<nsIDOMDocument> topDoc;
   topWindow->GetDocument(getter_AddRefs(topDoc));
 
-  nsCOMPtr<nsIURI> requestingURI;
   nsCOMPtr<nsIURI> popupURI;
-  nsCOMPtr<nsIWebNavigation> webNav =
-    do_GetInterface((nsIScriptGlobalObject *)this);
-  if (webNav)
-    webNav->GetCurrentURI(getter_AddRefs(requestingURI));
 
   // build the URI of the would-have-been popup window
   // (see nsWindowWatcher::URIfromURL)
@@ -4316,7 +4315,8 @@ nsGlobalWindow::FireAbuseEvents(PRBool a
 
   // fire an event chock full of informative URIs
   if (aBlocked)
-    FirePopupBlockedEvent(topDoc, requestingURI, popupURI, aPopupWindowName, aPopupWindowFeatures);
+    FirePopupBlockedEvent(topDoc, this, popupURI, aPopupWindowName,
+                          aPopupWindowFeatures);
   if (aWindow)
     FirePopupWindowEvent(topDoc);
 }
diff --git a/widget/public/nsGUIEvent.h b/widget/public/nsGUIEvent.h
index b6bbce3..098499d 100644
--- a/widget/public/nsGUIEvent.h
+++ b/widget/public/nsGUIEvent.h
@@ -54,6 +54,7 @@ #endif
 #include "nsCOMPtr.h"
 #include "nsIAtom.h"
 #include "nsIDOMKeyEvent.h"
+#include "nsWeakPtr.h"
 
 class nsIRenderingContext;
 class nsIRegion;
@@ -882,11 +883,11 @@ class nsPopupBlockedEvent : public nsEve
 public:
   nsPopupBlockedEvent(PRBool isTrusted, PRUint32 msg)
     : nsEvent(isTrusted, msg, NS_POPUPBLOCKED_EVENT),
-      mRequestingWindowURI(nsnull), mPopupWindowURI(nsnull)
+      mPopupWindowURI(nsnull)
   {
   }
 
-  nsIURI* mRequestingWindowURI; // owning reference
+  nsWeakPtr mRequestingWindow;
   nsIURI* mPopupWindowURI;      // owning reference
   nsString mPopupWindowFeatures;
   nsString mPopupWindowName;
