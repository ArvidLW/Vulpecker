diff --git a/editor/libeditor/html/nsHTMLEditRules.cpp b/editor/libeditor/html/nsHTMLEditRules.cpp
index 1d2df0b..f89175d 100644
--- a/editor/libeditor/html/nsHTMLEditRules.cpp
+++ b/editor/libeditor/html/nsHTMLEditRules.cpp
@@ -2816,7 +2816,7 @@ nsHTMLEditRules::DeleteNonTableElements(nsINode* aNode)
     return mHTMLEditor->DeleteNode(aNode->AsDOMNode());
   }
 
-  for (nsIContent* child = aNode->GetLastChild();
+  for (nsCOMPtr<nsIContent> child = aNode->GetLastChild();
        child;
        child = child->GetPreviousSibling()) {
     nsresult rv = DeleteNonTableElements(child);
