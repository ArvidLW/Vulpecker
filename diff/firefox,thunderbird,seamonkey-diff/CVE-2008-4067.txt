--- netwerk/protocol/res/src/nsResProtocolHandler.cpp	27 Aug 2008 07:25:30 -0000	1.71
+++ netwerk/protocol/res/src/nsResProtocolHandler.cpp	27 Aug 2008 18:36:14 -0000
@@ -240,17 +240,17 @@ nsResProtocolHandler::NewURI(const nsACS
     const char *src = aSpec.BeginReading();
     const char *end = aSpec.EndReading();
     const char *last = src;
 
     spec.SetCapacity(aSpec.Length()+1);
     for ( ; src < end; ++src) {
         if (*src == '%' && (src < end-2) && *(src+1) == '2') {
            char ch = '\0';
-           if (*(src+2) == 'f' || *(src+1) == 'F')
+           if (*(src+2) == 'f' || *(src+2) == 'F')
              ch = '/';
            else if (*(src+2) == 'e' || *(src+2) == 'E')
              ch = '.';
 
            if (ch) {
              if (last < src)
                spec.Append(last, src-last);
              spec.Append(ch);
