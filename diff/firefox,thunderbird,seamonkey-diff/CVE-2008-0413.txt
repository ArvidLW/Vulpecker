--- jsdbgapi.c	2 Aug 2007 04:33:52 -0000	3.99
+++ jsdbgapi.c	2 Aug 2007 22:30:47 -0000
@@ -571,16 +571,23 @@ js_watch_set(JSContext *cx, JSObject *ob
                 frame.scopeChain = OBJ_GET_PARENT(cx, closure);
 
                 cx->fp = &frame;
                 ok = !wp->setter ||
                      ((sprop->attrs & JSPROP_SETTER)
                       ? js_InternalCall(cx, obj, OBJECT_TO_JSVAL(wp->setter),
                                         1, vp, vp)
                       : wp->setter(cx, OBJ_THIS_OBJECT(cx, obj), userid, vp));
+
+                /* Evil code can cause us to have an arguments object. */
+                if (frame.callobj)
+                    ok &= js_PutCallObject(cx, &frame);
+                if (frame.argsobj)
+                    ok &= js_PutArgsObject(cx, &frame);
+
                 cx->fp = frame.down;
                 if (argv != smallv)
                     JS_free(cx, argv);
             }
             DBG_LOCK(rt);
             return DropWatchPointAndUnlock(cx, wp, JSWP_HELD) && ok;
         }
     }
