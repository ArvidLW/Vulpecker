--- a/content/xml/document/src/nsXMLDocument.cpp	Thu Aug 14 10:54:39 2008 -0700
+++ b/content/xml/document/src/nsXMLDocument.cpp	Fri Aug 15 14:34:26 2008 -0700
@@ -254,29 +254,16 @@ nsXMLDocument::OnChannelRedirect(nsIChan
 {
   NS_PRECONDITION(aNewChannel, "Redirecting to null channel?");
 
-  nsCOMPtr<nsIURI> newLocation;
-  nsresult rv = aNewChannel->GetURI(getter_AddRefs(newLocation)); // The redirected URI
-  if (NS_FAILED(rv)) 
-    return rv;
-
-  nsIScriptSecurityManager *secMan = nsContentUtils::GetSecurityManager();
-
   nsCOMPtr<nsIURI> oldURI;
-  rv = aOldChannel->GetURI(getter_AddRefs(oldURI));
+  nsresult rv = aOldChannel->GetURI(getter_AddRefs(oldURI));
   NS_ENSURE_SUCCESS(rv, rv);
 
   nsCOMPtr<nsIURI> newURI;
   rv = aNewChannel->GetURI(getter_AddRefs(newURI));
   NS_ENSURE_SUCCESS(rv, rv);
 
-  rv = nsContentUtils::GetSecurityManager()->
+  return nsContentUtils::GetSecurityManager()->
     CheckSameOriginURI(oldURI, newURI, PR_TRUE);
-
-  if (NS_FAILED(rv)) {
-    return rv;
-  }
-
-  return NS_OK;
 }
 
 NS_IMETHODIMP
