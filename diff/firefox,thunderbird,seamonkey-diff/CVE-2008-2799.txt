--- jsobj.c	15 May 2007 23:27:20 -0000	3.336
+++ jsobj.c	16 May 2007 19:40:24 -0000
@@ -2810,21 +2810,16 @@ js_AllocSlot(JSContext *cx, JSObject *ob
     }
 
     if (map->freeslot >= STOBJ_NSLOTS(obj) &&
         !ReallocSlots(cx, obj, map->freeslot + 1, JS_FALSE)) {
         return JS_FALSE;
     }
 
-#ifdef DEBUG
-#if JS_BYTES_PER_WORD == 8
-    STOBJ_SET_SLOT(obj, map->freeslot, (jsval)0xddddddddddddddd8L);
-#else
-    STOBJ_SET_SLOT(obj, map->freeslot, (jsval)0xddddddd8);
-#endif
-#endif
+    /* ReallocSlots or js_FreeSlot should set the free slots to void. */   
+    JS_ASSERT(STOBJ_GET_SLOT(obj, map->freeslot) == JSVAL_VOID);
     *slotp = map->freeslot++;
     return JS_TRUE;
 }
 
 void
 js_FreeSlot(JSContext *cx, JSObject *obj, uint32 slot)
 {
