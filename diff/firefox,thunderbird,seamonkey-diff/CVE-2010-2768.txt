diff -up mozilla/docshell/base/nsWebShell.cpp.579744 mozilla/docshell/base/nsWebShell.cpp
--- mozilla/docshell/base/nsWebShell.cpp.579744	2008-03-20 20:40:10.000000000 +0100
+++ mozilla/docshell/base/nsWebShell.cpp	2010-08-25 16:40:10.000000000 +0200
@@ -532,6 +532,10 @@ nsWebShell::OnLinkClickSync(nsIContent *
   nsCOMPtr<nsIDOMHTMLAnchorElement> anchor(do_QueryInterface(aContent));
   if (anchor) {
     anchor->GetType(typeHint);
+    NS_ConvertUTF16toUTF8 utf8Hint(typeHint);
+    nsCAutoString type, dummy;
+    NS_ParseContentType(utf8Hint, type, dummy);
+    CopyUTF8toUTF16(type, typeHint);
   }
   
   switch(aVerb) {
