diff --git a/net/can/bcm.c b/net/can/bcm.c
index 08ffe9e..0e81e04 100644
--- a/net/can/bcm.c
+++ b/net/can/bcm.c

@@ -1519,13 +1525,11 @@ static int bcm_connect(struct socket *sock, struct sockaddr *uaddr, int len,
  
  	bo->bound = 1;
  
 -	if (proc_dir) {
 -		/* unique socket address as filename */
 -		sprintf(bo->procname, "%p", sock);
 -		bo->bcm_proc_read = proc_create_data(bo->procname, 0644,
 +	/* use unique socket inode number as filename */
 +	if (proc_dir)
 +		bo->bcm_proc_read = proc_create_data(INODENUM(bo), 0644,
  						     proc_dir,
  						     &bcm_proc_fops, sk);
 -	}
  
  	return 0;
  }